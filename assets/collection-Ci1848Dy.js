import{_ as f,u,j as _,k as m,m as v,r as w,o as r,c as n,s as p,w as y,b as s,z as k,t as h,F as C,d as B}from"./index-CklsWiTl.js";const W={props:{msg:String},data(){return{list:[],containerWidth:0,containerHeight:0,winWidth:0,winHeight:0,loading:!1,over:!1,isMounted:!0,isLimit:!1,vkey:0,vvkey:0,gapRatio:.01}},setup(){const e=u(),t=_(()=>e.getters.getUserId);return m(()=>e.getters.getUserId,(l,d)=>{console.log(`User ID changed from ${d} to ${l}`)}),{userId:t}},computed:{nOfCol(){const e=this.containerWidth*.618*9/this.winHeight;let t=Math.floor(e);return t>5&&(t=5),t>3&&t<5&&(t=4),t<=3&&(t=2),console.log("nOfCol:",t,this.containerWidth,this.winHeight),t},widthOfCol(){const e=this.containerWidth*(1-this.gapRatio*(this.nOfCol+1))/this.nOfCol;return Math.floor(e*.98)},widthOfGap(){return this.containerWidth*this.gapRatio}},methods:{cli(e){console.log(e),this.$emit("enterPost",e)},verifyRerander(e){setTimeout(()=>{console.log(e,this.vkey),this.vkey==e&&(this.vvkey+=1)},200)},reranderV(){this.winWidth=window.innerWidth,this.winHeight=window.innerHeight,this.containerWidth=document.getElementById("waterfallContainer").getBoundingClientRect().width,console.log(document.getElementById("waterfallContainer").getBoundingClientRect().width),this.vkey+=1,this.verifyRerander(this.vkey)},async Getposts(){try{const e=await v.get("http://1.94.170.22:5000/get_user_collections?user_id="+this.$store.state.userId);this.list=e.data}catch(e){console.error("There was an error fetching the data!",e),console.log("http://1.94.170.22:5000/get_user_collections?user_id="+this.$store.state.userId),this.response=e.messgae}}},mounted(){window.addEventListener("resize",this.reranderV),this.reranderV(),this.vvkey+=1,this.Getposts()}},O={class:"father-box back",id:"waterfallContainer"},b={class:"list-item"},I=["onClick"],R={class:"cover-wrapper"},x=["src"],S={class:"brief"},H={class:"card-title"},L={class:"outline-bottom"},M={class:"article-tags"};function V(e,t,l,d,i,a){const g=w("v3-waterfall");return r(),n("div",O,[(r(),p(g,{ref:"wf",key:i.vvkey,list:i.list,colWidth:a.widthOfCol,gap:a.widthOfGap,"virtual-time":400,scrollBodySelector:i.isLimit?".limit-box":"",isMounted:i.isMounted,isLoading:i.loading,isOver:i.over,animation:!1,class:"waterfall",onScrollReachBottom:e.getNext},{default:y(o=>[s("div",b,[s("a",{href:"#",onClick:c=>a.cli(o.item)},[s("div",R,[o.item.cover?(r(),n("img",{key:0,src:o.item.cover,"data-key":"cover",class:"cover"},null,8,x)):k("",!0)]),s("div",S,[s("p",H,h(o.item.title),1)])],8,I),s("div",L,[s("p",M,[(r(!0),n(C,null,B(o.item.tags+"",c=>(r(),n("span",{key:c,class:"tag"},h(c),1))),128))])])])]),_:1},8,["list","colWidth","gap","scrollBodySelector","isMounted","isLoading","isOver","onScrollReachBottom"]))])}const G=f(W,[["render",V],["__scopeId","data-v-06bbb4c2"]]);export{G as default};
