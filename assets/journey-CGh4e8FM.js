import{_ as y,D as g,G as f,m as n,r as i,o as a,c as l,b as h,a as v,w as p,s as u,z as x,F as k,d as S,y as P,t as I}from"./index-CklsWiTl.js";import{t as T}from"./test_covers-B8hz7QS7.js";const W={props:{searchKeyword:String},components:{waterfall:g,searchbox:f},data(){return{posts:[],windowWidth:0,windowHeight:0,wfDisplay:!1,searchHistory:[{display:"推荐",content:""}],selectIndex:0}},computed:{userId(){return this.$store.state.userId}},methods:{goToSquare(e,t){this.selectIndex=t,this.$router.push({path:"/square",query:{keyword:e}})},async loadPosts(){const e=await n.get(`http://1.94.170.22:5000/get_user_posts?user_id=${this.$store.state.userId}&target_id=${this.$store.state.userId}`);console.log(e),setTimeout(()=>{this.posts=e.data,this.posts=this.posts.concat(T)},700)},handleEnterPost(e){this.$emit("enterPost",e.uid)},updateWindowSize(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight},async del(e){try{const t={post_id:e},s=await n.post("http://1.94.170.22:5000/delete_post",t);this.response=s.data}catch(t){console.error("There was an error sending the data!",t),this.response=t.message}this.reranderV(),this.vvkey+=1,this.loadPosts()},async postAndcancel(e){try{const t={post_id:e},s=await n.post("http://1.94.170.22:5000/toggle_public",t);this.response=s.data}catch(t){console.error("There was an error sending the data!",t),this.response=t.message}this.reranderV(),this.vvkey+=1,this.loadPosts()}},mounted(){this.loadPosts(),this.updateWindowSize(),console.log(window.innerWidth),window.addEventListener("resize",this.updateWindowSize),setTimeout(()=>{this.wfDisplay=!0},100)}},b={class:"container-box"},C={class:"search-container"},E={class:"waterfall-container"};function V(e,t,s,$,o,c){const w=i("el-menu-item"),_=i("el-menu"),m=i("waterfall");return a(),l("div",b,[h("div",C,[v(_,{"default-active":o.selectIndex,mode:"vertical","background-color":"var(--bg-color)","text-color":"var(--display-text-color)","active-text-color":"var(--display-text-color-active)",onSelect:e.handleSelect,class:"search-history"},{default:p(()=>[(a(!0),l(k,null,S(o.searchHistory,(d,r)=>(a(),u(w,{key:r,index:r,onClick:z=>c.goToSquare(d.content,r),class:"search-item"},{default:p(()=>[P(I(d.display),1)]),_:2},1032,["index","onClick"]))),128))]),_:1},8,["default-active","onSelect"])]),h("div",E,[o.wfDisplay?(a(),u(m,{key:0,class:"waterfall",list:o.posts,onEnterPost:c.handleEnterPost},null,8,["list","onEnterPost"])):x("",!0)])])}const q=y(W,[["render",V],["__scopeId","data-v-75e45702"]]);export{q as default};
